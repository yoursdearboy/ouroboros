{
    "select": {
        "columns": [
            "patients.id",
            "patients.last_name",
            {
                "name": "diagnoses",
                "pivot": {
                    "name": "diagnoses",
                    "pivot_by": "diagnoses.patient_id"
                },
                "columns": [
                    "diagnoses.icd_code"
                ]
            }
        ],
        "froms": [
            {
                "left": "patients",
                "right": {
                    "name": "diagnoses",
                    "pivot_by": "diagnoses.patient_id"
                },
                "on": "patients.id = diagnoses.patient_id"
            }
        ]
    }
}
